//# sourceMappingURL=date.js.map
(function(){var l;l="undefined"!==typeof exports?exports:this.timezoneJS={};l.VERSION="1.0.0";for(var r=this.$||this.jQuery||this.Zepto,p=this.fleegix,t=l.Days="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),x=l.Months="January February March April May June July August September October November December".split(" "),u={},w={},k={},y=/^[a-zA-Z]+\//,n=0;n<x.length;n++)u[x[n].substr(0,3)]=n;for(n=0;n<t.length;n++)w[t[n].substr(0,3)]=n;Array.prototype.indexOf||(Array.prototype.indexOf=
function(a){for(var d=0;d<this.length;d++)if(a===this[d])return d;return-1});var q=function(a,d){if("number"!==typeof a)throw"not a number: "+a;var c=a.toString();if(a.length>d)return a.substr(a.length-d,a.length);for(;c.length<d;)c="0"+c;return c},z=function(a){if(!(p&&"undefined"!==typeof p.xhr||r&&"undefined"!==typeof r.ajax))throw Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");if(a){if(!a.url)throw Error("URL must be specified");
"async"in a||(a.async=!0);return a.async?p&&p.xhr?p.xhr.send({url:a.url,method:"get",handleSuccess:a.success,handleErr:a.error}):r.ajax({url:a.url,dataType:"text",method:"GET",error:a.error,success:a.success}):p&&p.xhr?p.xhr.doReq({url:a.url,async:!1}):r.ajax({url:a.url,async:!1}).responseText}};l.Date=function(){var a=Array.prototype.slice.apply(arguments),d=null,c=[];"[object Array]"===Object.prototype.toString.call(a[0])&&(a=a[0]);"string"===typeof a[a.length-1]&&y.test(a[a.length-1])&&(d=a.pop());
switch(a.length){case 0:a=new Date;break;case 1:a=new Date(a[0]);break;default:for(var h=0;7>h;h++)c[h]=a[h]||0;a=new Date(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}this._useCache=!1;this._tzInfo={};this.milliseconds=this.seconds=this.minutes=this.hours=this.date=this.month=this.year=this._day=0;this.timezone=d||null;c.length?this.setFromDateObjProxy(a):this.setFromTimeProxy(a.getTime(),d)};l.Date.prototype={getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return this.year},
getMonth:function(){return this.month},getYear:function(){return this.year},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},
getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){return this._timeProxy+6E4*this.getTimezoneOffset()},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},
getTimezoneInfo:function(){if(this._useCache)return this._tzInfo;var a;this._tzInfo=a=this.timezone?"Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:l.timezone.getTzInfo(this._timeProxy,this.timezone):{tzOffset:this.getLocalOffset(),tzAbbr:null};this._useCache=!0;return a},getUTCDateProxy:function(){var a=new Date(this._timeProxy);a.setUTCMinutes(a.getUTCMinutes()+this.getTimezoneOffset());return a},setDate:function(a){this.setAttribute("date",a)},setFullYear:function(a){this.setAttribute("year",
a)},setMonth:function(a){this.setAttribute("month",a)},setYear:function(a){this.setUTCAttribute("year",a)},setHours:function(a){this.setAttribute("hours",a)},setMilliseconds:function(a){this.setAttribute("milliseconds",a)},setMinutes:function(a){this.setAttribute("minutes",a)},setSeconds:function(a){this.setAttribute("seconds",a)},setTime:function(a){if(isNaN(a))throw Error("Units must be a number.");this.setFromTimeProxy(a,this.timezone)},setUTCDate:function(a){this.setUTCAttribute("date",a)},setUTCFullYear:function(a){this.setUTCAttribute("year",
a)},setUTCHours:function(a){this.setUTCAttribute("hours",a)},setUTCMilliseconds:function(a){this.setUTCAttribute("milliseconds",a)},setUTCMinutes:function(a){this.setUTCAttribute("minutes",a)},setUTCMonth:function(a){this.setUTCAttribute("month",a)},setUTCSeconds:function(a){this.setUTCAttribute("seconds",a)},setFromDateObjProxy:function(a){this.year=a.getFullYear();this.month=a.getMonth();this.date=a.getDate();this.hours=a.getHours();this.minutes=a.getMinutes();this.seconds=a.getSeconds();this.milliseconds=
a.getMilliseconds();this._day=a.getDay();this._dateProxy=a;this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds);this._useCache=!1},setFromTimeProxy:function(a,d){var c=new Date(a);d=d?l.timezone.getTzInfo(c,d).tzOffset:c.getTimezoneOffset();c.setTime(a+6E4*(c.getTimezoneOffset()-d));this.setFromDateObjProxy(c)},setAttribute:function(a,d){if(isNaN(d))throw Error("Units must be a number.");var c=this._dateProxy;a="year"===a?"FullYear":a.substr(0,
1).toUpperCase()+a.substr(1);c["set"+a](d);this.setFromDateObjProxy(c)},setUTCAttribute:function(a,d){if(isNaN(d))throw Error("Units must be a number.");a="year"===a?"FullYear":a.substr(0,1).toUpperCase()+a.substr(1);var c=this.getUTCDateProxy();c["setUTC"+a](d);c.setUTCMinutes(c.getUTCMinutes()-this.getTimezoneOffset());this.setFromTimeProxy(c.getTime()+6E4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(a){var d=this.getTimezoneInfo().tzOffset;this.timezone=a;this._useCache=!1;this.setUTCMinutes(this.getUTCMinutes()-
this.getTimezoneInfo().tzOffset+d)},removeTimezone:function(){this.timezone=null;this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return this.timezone?new l.Date(this.getTime(),this.timezone):new l.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleString:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return this.toString("yyyy-MM-ddTHH:mm:ss.SSS",
"Etc/UTC")+"Z"},toJSON:function(){return this.toISOString()},toString:function(a,d){a||(a="yyyy-MM-dd HH:mm:ss");var c=d?l.timezone.getTzInfo(this.getTime(),d):this.getTimezoneInfo(),h=this;d&&(h=this.clone(),h.setTimezone(d));var k=h.getHours();return a.replace(/a+/g,function(){return"k"}).replace(/y+/g,function(a){return q(h.getFullYear(),a.length)}).replace(/d+/g,function(a){return q(h.getDate(),a.length)}).replace(/m+/g,function(a){return q(h.getMinutes(),a.length)}).replace(/s+/g,function(a){return q(h.getSeconds(),
a.length)}).replace(/S+/g,function(a){return q(h.getMilliseconds(),a.length)}).replace(/M+/g,function(a){var d=h.getMonth();a=a.length;return 3<a?l.Months[d]:2<a?l.Months[d].substring(0,a):q(d+1,a)}).replace(/k+/g,function(){return 12<=k?(12<k&&(k-=12),"PM"):"AM"}).replace(/H+/g,function(a){return q(k,a.length)}).replace(/E+/g,function(a){return t[h.getDay()].substring(0,a.length)}).replace(/Z+/gi,function(){return c.tzAbbr})},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(a,
d,c){var h;d++;12<d&&(h=parseInt(d/12,10),d%=12,a+=h);2>=d&&(--a,d+=12);h=Math.floor(a/100);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(d+1))+c+(2-h+Math.floor(h/4))-1524},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}};l.timezone=new function(){function a(a){throw Error('Timezone "'+a+'" is either incorrect, or not loaded in the timezone registry.');}function d(a,b){var d=g.zoneFileBasePath+"/"+a;return b&&b.async?g.transport({async:!0,url:d,success:function(a){g.parseZones(a)&&
"function"===typeof b.callback&&b.callback();return!0},error:function(){throw Error('Error retrieving "'+d+'" zoneinfo files');}}):g.parseZones(g.transport({url:d,async:!1}))}function c(e){var b=t[e];if(b)return b;b=e.split("/")[0];if(b=r[b])return b;b=g.zones[e];if("string"===typeof b)return c(b);if(!g.loadedZones.backward)return g.loadZoneFile("backward"),c(e);a(e)}function h(a){a=a.match(/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/);a[1]=parseInt(a[1],10);a[2]=a[2]?parseInt(a[2],10):0;a[3]=a[3]?
parseInt(a[3],10):0;return a}function l(a){if(a[3]){var b=parseInt(a[3],10),d=11,f=31;a[4]&&(d=u[a[4].substr(0,3)],f=parseInt(a[5],10)||1);a=h(a[6]?a[6]:"00:00:00");return[b,d,f,a[1],a[2],a[3]]}}function n(e,b){for(var d="number"===typeof e?e:(new Date(e)).getTime(),f=b,c=g.zones[f];"string"===typeof c;)f=c,c=g.zones[f];if(!c){if(!g.loadedZones.backward)return g.loadZoneFile("backward"),n(e,b);a(f)}if(0===c.length)throw Error('No Zone found for "'+b+'" on '+e);for(e=c.length-1;0<=e&&!(b=c[e],b[3]&&
d>b[3]);e--);return c[e+1]}function p(a){var b=h(a),b=1E3*(0===a.indexOf("-")?-1:1)*(60*(60*b[1]+b[2])+b[3]);return b/60/1E3}function q(a,b,d){a="number"===typeof a?new Date(a):a;var f=b[1],c=b[0],h=function(a,b,d){if("u"===b||"g"===b||"z"===b)b=0;else if("s"===b)b=c;else{if("w"!==b&&b)throw"unknown type "+b;b=-Math.ceil(d[6]-c)}b*=6E4;return new Date(a.getTime()+b)},l=function(a,b){var d=a[0];a=a[1];var e=a[5],c;k[d]||(k[d]={});if(k[d][a])c=k[d][a];else{if(isNaN(a[4])){var f,g;"last"===a[4].substr(0,
4)?(c=new Date(Date.UTC(d,u[a[3]]+1,1,e[1]-24,e[2],e[3],0)),f=w[a[4].substr(4,3)],g="<="):(c=new Date(Date.UTC(d,u[a[3]],a[4].substr(5),e[1],e[2],e[3],0)),f=w[a[4].substr(0,3)],g=a[4].substr(3,2));var v=c.getUTCDay();">="===g?c.setUTCDate(c.getUTCDate()+(f-v+(f<v?7:0))):c.setUTCDate(c.getUTCDate()+(f-v-(f>v?7:0)))}else c=new Date(Date.UTC(d,u[a[3]],a[4],e[1],e[2],e[3],0));k[d][a]=c}b&&(c=h(c,e[4],b));return c},n=function(a,b){for(var d=[],e=0;b&&e<b.length;e++)b[e][0]<=a&&(b[e][1]>=a||b[e][0]===a&&
"only"===b[e][1]||"max"===b[e][1])&&d.push([a,b[e]]);return d};b=function(a,b,e){var c,f;a.constructor!==Date?(c=a[0],f=a[1],a=!e&&k[c]&&k[c][f]?k[c][f]:l(a,e)):e&&(a=h(a,d?"u":"w",e));b.constructor!==Date?(c=b[0],f=b[1],b=!e&&k[c]&&k[c][f]?k[c][f]:l(b,e)):e&&(b=h(b,d?"u":"w",e));a=Number(a);b=Number(b);return a-b};var p=a.getUTCFullYear(),m;m=n(p,g.rules[f]);m.push(a);m.sort(b);2>m.indexOf(a)&&(m=m.concat(n(p-1,g.rules[f])),m.sort(b));f=m.indexOf(a);return 1<f&&0>b(a,m[f-1],m[f-2][1])?m[f-2][1]:
0<f&&f<m.length-1&&0<b(a,m[f+1],m[f-1][1])?m[f+1][1]:0===f?null:m[f-1][1]}var g=this,r={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:"northamerica",Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},t={"Pacific/Honolulu":"northamerica",
"Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe",
"Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe","America/Argentina/Buenos_Aires":"southamerica","America/Argentina/Cordoba":"southamerica","America/Argentina/Tucuman":"southamerica","America/Argentina/La_Rioja":"southamerica","America/Argentina/San_Juan":"southamerica","America/Argentina/Jujuy":"southamerica","America/Argentina/Catamarca":"southamerica","America/Argentina/Mendoza":"southamerica",
"America/Argentina/Rio_Gallegos":"southamerica","America/Argentina/Ushuaia":"southamerica","America/Aruba":"southamerica","America/La_Paz":"southamerica","America/Noronha":"southamerica","America/Belem":"southamerica","America/Fortaleza":"southamerica","America/Recife":"southamerica","America/Araguaina":"southamerica","America/Maceio":"southamerica","America/Bahia":"southamerica","America/Sao_Paulo":"southamerica","America/Campo_Grande":"southamerica","America/Cuiaba":"southamerica","America/Porto_Velho":"southamerica",
"America/Boa_Vista":"southamerica","America/Manaus":"southamerica","America/Eirunepe":"southamerica","America/Rio_Branco":"southamerica","America/Santiago":"southamerica","Pacific/Easter":"southamerica","America/Bogota":"southamerica","America/Curacao":"southamerica","America/Guayaquil":"southamerica","Pacific/Galapagos":"southamerica","Atlantic/Stanley":"southamerica","America/Cayenne":"southamerica","America/Guyana":"southamerica","America/Asuncion":"southamerica","America/Lima":"southamerica",
"Atlantic/South_Georgia":"southamerica","America/Paramaribo":"southamerica","America/Port_of_Spain":"southamerica","America/Montevideo":"southamerica","America/Caracas":"southamerica"};this.zoneFileBasePath;this.zoneFiles="africa antarctica asia australasia backward etcetera europe northamerica pacificnew southamerica".split(" ");this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"};this.loadingScheme=this.loadingSchemes.LAZY_LOAD;this.loadedZones={};this.zones=
{};this.rules={};this.init=function(a){var b={async:!0},c=this.defaultZoneFile=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:"northamerica",d=0,g,h;for(h in a)b[h]=a[h];if("string"===typeof c)return this.loadZoneFile(c,b);g=b.callback;b.callback=function(){d++;d===c.length&&"function"===typeof g&&g()};for(a=0;a<c.length;a++)this.loadZoneFile(c[a],b)};this.loadZoneFile=function(a,b){if("undefined"===typeof this.zoneFileBasePath)throw Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");
if(!this.loadedZones[a])return this.loadedZones[a]=!0,d(a,b)};this.loadZoneJSONData=function(a,b){var c=function(a){a=eval("("+a+")");for(var b in a.zones)g.zones[b]=a.zones[b];for(var c in a.rules)g.rules[c]=a.rules[c]};return b?c(g.transport({url:a,async:!1})):g.transport({url:a,success:c})};this.loadZoneDataFromObject=function(a){if(a){for(var b in a.zones)g.zones[b]=a.zones[b];for(var c in a.rules)g.rules[c]=a.rules[c]}};this.getAllZones=function(){var a=[],b;for(b in this.zones)a.push(b);return a.sort()};
this.parseZones=function(a){a=a.split("\n");for(var b,c,d=null,k=0;k<a.length;k++)if(b=a[k],b.match(/^\s/)&&(b="Zone "+d+b),b=b.split("#")[0],3<b.length)switch(b=b.split(/\s+/),c=b.shift(),c){case "Zone":d=b.shift();g.zones[d]||(g.zones[d]=[]);if(3>b.length)break;b.splice(3,b.length,l(b));b[3]&&(b[3]=Date.UTC.apply(null,b[3]));b[0]=-p(b[0]);g.zones[d].push(b);break;case "Rule":c=b.shift();g.rules[c]||(g.rules[c]=[]);b[0]=parseInt(b[0],10);b[1]=parseInt(b[1],10)||b[1];b[5]=h(b[5]);b[6]=p(b[6]);g.rules[c].push(b);
break;case "Link":if(g.zones[b[1]])throw Error("Error with Link "+b[1]+". Cannot create link of a preexisted zone.");g.zones[b[1]]=b[0]}return!0};this.transport=z;this.getTzInfo=function(a,b,d){if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){var f=c(b);if(!f)throw Error("Not a valid timezone ID.");this.loadedZones[f]||this.loadZoneFile(f)}f=n(a,b);b=f[0];(a=q(a,f,d))&&(b=-Math.ceil(a[6]-b));d=f[2];a=-1<d.indexOf("%s")?d.replace("%s",a?"-"===a[7]?"":a[7]:"S"):-1<d.indexOf("/")?d.split("/",2)[a[6]?
1:0]:d;return{tzOffset:b,tzAbbr:a}}}}).call(this);