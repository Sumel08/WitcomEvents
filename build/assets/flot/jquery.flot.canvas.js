//# sourceMappingURL=jquery.flot.canvas.js.map
(function(m){var t,n,w,u=Object.prototype.hasOwnProperty;m.plot.plugins.push({init:function(v,l){l=l.Canvas;null==t&&(n=l.prototype.getTextInfo,w=l.prototype.addText,t=l.prototype.render);l.prototype.render=function(){if(!v.getOptions().canvas)return t.call(this);var b=this.context,e=this._textCache;b.save();for(var a in e)if(u.call(e,a)){var d=e[a],f;for(f in d)if(u.call(d,f)){var g=d[f],c=!0,h;for(h in g)if(u.call(g,h)){var k=g[h];if(k.active){var l=k.x,q=k.y,m=k.lines,n=k.halign;c&&(b.fillStyle=
k.font.color,b.font=k.font.definition,c=!1);b.textBaseline="top";for(k=0;k<m.length;++k){var r=m[k],p=l;"center"==n?p-=r.width/2:"right"==n&&(p-=r.width);window.opera&&12>window.opera.version().split(".")[0]&&(p=Math.floor(p),q=Math.ceil(q-2));b.fillText(r.text,p,q);q+=r.height}}else delete g[h]}}}b.restore()};l.prototype.getTextInfo=function(b,e,a,d){if(!v.getOptions().canvas)return n.call(this,b,e,a,d);var f,g,c;e=""+e;f="object"===typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px "+a.family:
a;d=this._textCache[b];null==d&&(d=this._textCache[b]={});g=d[f];null==g&&(g=d[f]={});c=g[e];if(null==c){d=this.context;"object"!==typeof a&&(c=m("<div></div>").html(e).addClass("string"===typeof a?a:null).css({position:"absolute",top:-9999}).appendTo(this.getTextLayer(b)),a={style:c.css("font-style"),variant:c.css("font-variant"),weight:c.css("font-weight"),size:parseInt(c.css("font-size"),10),family:c.css("font-family"),color:c.css("color")},c.remove());f=a.style+" "+a.variant+" "+a.weight+" "+
a.size+"px "+a.family;c=g[e]={x:null,y:null,width:0,height:0,active:!1,lines:[],font:{definition:f,color:a.color}};d.save();d.font=f;e=(e+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n");for(b=0;b<e.length;++b){g=e[b];var h=d.measureText(g);f=h.width;h=h.height||a.size;h+=Math.round(.15*a.size);c.width=Math.max(f,c.width);c.height+=h;c.lines.push({text:g,width:f,height:h})}d.restore()}return c};l.prototype.addText=function(b,e,a,d,f,g,c,h){if(!v.getOptions().canvas)return w.call(this,b,e,a,d,f,
g,c,h);b=this.getTextInfo(b,d,f,g);b.x=e;b.y=a;b.active=!0;b.halign=c;"middle"==h?b.y=a-b.height/2:"bottom"==h&&(b.y=a-b.height)}},options:{canvas:!0},name:"canvas",version:"1.0"})})(jQuery);