//# sourceMappingURL=jquery.flot.pie.js.map
(function(p){var c={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(c,p){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+p.color+";'>"+c+"<br/>"+Math.round(p.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};p.plot.plugins.push({init:function(n){function F(a){for(var b=
0,d=0,h=0,g=c.series.pie.combine.color,m=[],l=0;l<a.length;++l){var f=a[l].data;p.isArray(f)?p.isNumeric(f[1])?f[1]=+f[1]:f[1]=0:f=p.isNumeric(f)?[1,+f]:[1,0];a[l].data=[f]}for(l=0;l<a.length;++l)b+=a[l].data[0][1];for(l=0;l<a.length;++l)f=a[l].data[0][1],f/b<=c.series.pie.combine.threshold&&(d+=f,h++,g||(g=a[l].color));for(l=0;l<a.length;++l)f=a[l].data[0][1],(2>h||f/b>c.series.pie.combine.threshold)&&m.push({data:[[1,f]],color:a[l].color,label:a[l].label,angle:f*Math.PI*2/b,percent:f/(b/100)});
1<h&&m.push({data:[[1,d]],color:g,label:c.series.pie.combine.label,angle:d*Math.PI*2/b,percent:d/(b/100)});return m}function G(a,b){function k(){d.clearRect(0,0,m,l);x.children().filter(".pieLabel, .pieLabelBackground").remove()}function h(){var a=c.series.pie.shadow.left,b=c.series.pie.shadow.top,g=c.series.pie.shadow.alpha,f=1<c.series.pie.radius?c.series.pie.radius:u*c.series.pie.radius;if(!(f>=m/2-a||f*c.series.pie.tilt>=l/2-b||10>=f)){d.save();d.translate(a,b);d.globalAlpha=g;d.fillStyle="#000";
d.translate(r,y);d.scale(1,c.series.pie.tilt);for(a=1;10>=a;a++)d.beginPath(),d.arc(0,0,f,0,2*Math.PI,!1),d.fill(),f-=a;d.restore()}}function g(){function a(b,c,g){0>=b||isNaN(b)||(g?d.fillStyle=c:(d.strokeStyle=c,d.lineJoin="round"),d.beginPath(),1E-9<Math.abs(b-2*Math.PI)&&d.moveTo(0,0),d.arc(0,0,f,h,h+b/2,!1),d.arc(0,0,f,h+b/2,h+b,!1),d.closePath(),h+=b,g?d.fill():d.stroke())}function b(){for(var a=g,d=1<c.series.pie.label.radius?c.series.pie.label.radius:u*c.series.pie.label.radius,f=0;f<q.length;++f){if(q[f].percent>=
100*c.series.pie.label.threshold){var e;e=q[f];var k=a,h=f;if(0==e.data[0][1])e=!0;else{var n=c.legend.labelFormatter,t=c.series.pie.label.formatter,n=n?n(e.label,e):e.label;t&&(n=t(n,e));t=(k+e.angle+k)/2;k=r+Math.round(Math.cos(t)*d);t=y+Math.round(Math.sin(t)*d)*c.series.pie.tilt;x.append("<span class='pieLabel' id='pieLabel"+h+"' style='position:absolute;top:"+t+"px;left:"+k+"px;'>"+n+"</span>");h=x.children("#pieLabel"+h);n=t-h.height()/2;t=k-h.width()/2;h.css("top",n);h.css("left",t);0<0-n||
0<0-t||0>l-(n+h.height())||0>m-(t+h.width())?e=!1:(0!=c.series.pie.label.background.opacity&&(k=c.series.pie.label.background.color,null==k&&(k=e.color),e="top:"+n+"px;left:"+t+"px;",p("<div class='pieLabelBackground' style='position:absolute;width:"+h.width()+"px;height:"+h.height()+"px;"+e+"background-color:"+k+";'></div>").css("opacity",c.series.pie.label.background.opacity).insertBefore(h)),e=!0)}if(!e)return!1}a+=q[f].angle}return!0}var g=Math.PI*c.series.pie.startAngle,f=1<c.series.pie.radius?
c.series.pie.radius:u*c.series.pie.radius;d.save();d.translate(r,y);d.scale(1,c.series.pie.tilt);d.save();for(var h=g,k=0;k<q.length;++k)q[k].startAngle=h,a(q[k].angle,q[k].color,!0);d.restore();if(0<c.series.pie.stroke.width){d.save();d.lineWidth=c.series.pie.stroke.width;h=g;for(k=0;k<q.length;++k)a(q[k].angle,c.series.pie.stroke.color,!1);d.restore()}B(d);d.restore();return c.series.pie.label.show?b():!0}if(x){var m=a.getPlaceholder().width(),l=a.getPlaceholder().height(),f=x.children().filter(".legend").children().width()||
0;d=b;z=!1;u=Math.min(m,l/c.series.pie.tilt)/2;y=l/2+c.series.pie.offset.top;r=m/2;r="auto"==c.series.pie.offset.left?c.legend.position.match("w")?r+f/2:r-f/2:r+c.series.pie.offset.left;r<u?r=u:r>m-u&&(r=m-u);var q=a.getData();b=0;do 0<b&&(u*=.95),b+=1,k(),.8>=c.series.pie.tilt&&h();while(!g()&&10>b);10<=b&&(k(),x.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));a.setSeries&&a.insertLegend&&(a.setSeries(q),a.insertLegend())}}function B(a){if(0<c.series.pie.innerRadius){a.save();
var b=1<c.series.pie.innerRadius?c.series.pie.innerRadius:u*c.series.pie.innerRadius;a.globalCompositeOperation="destination-out";a.beginPath();a.fillStyle=c.series.pie.stroke.color;a.arc(0,0,b,0,2*Math.PI,!1);a.fill();a.closePath();a.restore();a.save();a.beginPath();a.strokeStyle=c.series.pie.stroke.color;a.arc(0,0,b,0,2*Math.PI,!1);a.stroke();a.closePath();a.restore()}}function H(a){C("plothover",a)}function I(a){C("plotclick",a)}function C(a,b){var k=n.offset(),h=parseInt(b.pageX-k.left);a:{for(var k=
parseInt(b.pageY-k.top),g=n.getData(),m=n.getOptions(),m=1<m.series.pie.radius?m.series.pie.radius:u*m.series.pie.radius,l,f,q=0;q<g.length;++q){var e=g[q];if(e.pie.show){d.save();d.beginPath();d.moveTo(0,0);d.arc(0,0,m,e.startAngle,e.startAngle+e.angle/2,!1);d.arc(0,0,m,e.startAngle+e.angle/2,e.startAngle+e.angle,!1);d.closePath();l=h-r;f=k-y;if(d.isPointInPath){if(d.isPointInPath(h-r,k-y)){d.restore();h={datapoint:[e.percent,e.data],dataIndex:0,series:e,seriesIndex:q};break a}}else{var v=[[0,0],
[m*Math.cos(e.startAngle),m*Math.sin(e.startAngle)],[m*Math.cos(e.startAngle+e.angle/4),m*Math.sin(e.startAngle+e.angle/4)],[m*Math.cos(e.startAngle+e.angle/2),m*Math.sin(e.startAngle+e.angle/2)],[m*Math.cos(e.startAngle+e.angle/1.5),m*Math.sin(e.startAngle+e.angle/1.5)],[m*Math.cos(e.startAngle+e.angle),m*Math.sin(e.startAngle+e.angle)]];l=[l,f];f=!1;for(var p=-1,z=v.length,A=z-1;++p<z;A=p)(v[p][1]<=l[1]&&l[1]<v[A][1]||v[A][1]<=l[1]&&l[1]<v[p][1])&&l[0]<(v[A][0]-v[p][0])*(l[1]-v[p][1])/(v[A][1]-
v[p][1])+v[p][0]&&(f=!f);if(f){d.restore();h={datapoint:[e.percent,e.data],dataIndex:0,series:e,seriesIndex:q};break a}}d.restore()}}h=null}if(c.grid.autoHighlight)for(k=0;k<w.length;++k)g=w[k],g.auto!=a||h&&g.series==h.series||(g=g.series,null==g&&(w=[],n.triggerRedrawOverlay()),g=D(g),-1!=g&&(w.splice(g,1),n.triggerRedrawOverlay()));h&&(k=h.series,g=D(k),-1==g?(w.push({series:k,auto:a}),n.triggerRedrawOverlay()):a||(w[g].auto=!1));x.trigger(a,[{pageX:b.pageX,pageY:b.pageY},h])}function D(a){for(var b=
0;b<w.length;++b)if(w[b].series==a)return b;return-1}var E=null,x=null,u=null,r=null,y=null,z=!1,d=null,w=[];n.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?.75:1),1<b.series.pie.tilt?b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});n.hooks.bindEvents.push(function(a,b){a=a.getOptions();a.series.pie.show&&
(a.grid.hoverable&&b.unbind("mousemove").mousemove(H),a.grid.clickable&&b.unbind("click").click(I))});n.hooks.processDatapoints.push(function(a,b,d,h){a.getOptions().series.pie.show&&!z&&(z=!0,E=a.getCanvas(),x=p(E).parent(),c=a.getOptions(),a.setData(F(a.getData())))});n.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){a=a.getOptions();var d=1<a.series.pie.radius?a.series.pie.radius:u*a.series.pie.radius;b.save();b.translate(r,y);b.scale(1,a.series.pie.tilt);for(var c=0;c<
w.length;++c){var g=w[c].series;0>=g.angle||isNaN(g.angle)||(b.fillStyle="rgba(255, 255, 255, "+a.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(g.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,g.startAngle,g.startAngle+g.angle/2,!1),b.arc(0,0,d,g.startAngle+g.angle/2,g.startAngle+g.angle,!1),b.closePath(),b.fill())}B(b);b.restore()}});n.hooks.draw.push(function(a,b){a.getOptions().series.pie.show&&G(a,b)})},options:c,name:"pie",version:"1.1"})})(jQuery);